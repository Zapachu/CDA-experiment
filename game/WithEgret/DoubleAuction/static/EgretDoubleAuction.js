!function(e){var n={};function t(a){if(n[a])return n[a].exports;var r=n[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:a})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(t.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(a,r,function(n){return e[n]}.bind(null,r));return a},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/bespoke/EgretDoubleAuction/static/",t(t.s=8)}([function(e,n){e.exports=React},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),function(e){e.connection="connection",e.disconnect="disconnect",e.online="online",e.move="move",e.push="push",e.syncGameState_json="SGJ",e.syncPlayerState_json="SPJ",e.changeGameState_diff="CGD",e.changePlayerState_diff="CPD"}(n.SocketEvent||(n.SocketEvent={})),function(e){e.switchGameStatus="switchGameStatus"}(n.CoreMove||(n.CoreMove={})),function(e){e[e.started=0]="started",e[e.paused=1]="paused",e[e.over=2]="over"}(n.GameStatus||(n.GameStatus={})),function(e){e[e.default=0]="default",e[e.diff=1]="diff"}(n.SyncStrategy||(n.SyncStrategy={}))},function(e,n){e.exports=function(e){var n=typeof e;return null!=e&&("object"==n||"function"==n)}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.config={rootName:"bespoke",apiPrefix:"api",socketPath:function(e){return"/bespoke/"+e+"/socket.io"},devPort:{client:8080,server:8081},minMoveInterval:500,vcodeLifetime:60}},function(e,n,t){var a=t(18),r="object"==typeof self&&self&&self.Object===Object&&self,o=a||r||Function("return this")();e.exports=o},function(e,n,t){var a=t(4).Symbol;e.exports=a},function(e,n){e.exports=ElfComponent},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.namespace="EgretDoubleAuction",n.Config={ROUND:3,PREPARE_TIME:5,TRADE_TIME:120,RESULT_TIME:10,PLAYER_NUM:6},function(e){e[e.prepare=0]="prepare",e[e.trade=1]="trade",e[e.result=2]="result"}(n.GameScene||(n.GameScene={})),function(e){e[e.seller=0]="seller",e[e.buyer=1]="buyer"}(n.Role||(n.Role={})),function(e){e.getIndex="getIndex",e.shout="shout",e.onceMore="onceMore"}(n.MoveType||(n.MoveType={})),function(e){e[e.beginRound=0]="beginRound"}(n.PushType||(n.PushType={}))},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=t(9),r=t(7),o=t(27);a.registerOnFramework(r.namespace,{localeNames:["EgretDemo","EgretDemo"],Play:o.Play})},function(e,n,t){"use strict";var a,r=this&&this.__extends||(a=function(e,n){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])})(e,n)},function(e,n){function t(){this.constructor=e}a(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var n,t=1,a=arguments.length;t<a;t++)for(var r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e}).apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0});var i=t(0),u=t(10),c=t(26),s=t(6);!function(e){function n(e){return i.createElement("div",{style:{fontSize:"2rem",margin:"2rem",textAlign:"center",color:"#999"}},s.Lang.extractLang(e).label)}var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return i.createElement(n,{label:["无可配置参数","No parameters to config"]})},t}(c.Template.Create);e.Create=t;var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return i.createElement(n,{label:["实验进行中","Playing..."]})},t}(i.Component);e.Play=a;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return i.createElement(n,{label:["实验进行中","Playing..."]})},t}(i.Component);e.Play4Owner=o;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return i.createElement(n,{label:["实验已结束","GAME OVER"]})},t}(i.Component);e.Result=u;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return i.createElement(n,{label:["实验已结束","GAME OVER"]})},t}(i.Component);e.Result4Owner=l}(n.Core||(n.Core={}));var l=function(e){function n(n){var t=e.call(this)||this;return t.namespace=n,t}return r(n,e),n.instance=function(e){return this._instance||(this._instance=new n(e)),this._instance},n.prototype.buildUrl=function(n,t,a){return void 0===t&&(t={}),void 0===a&&(a={}),e.prototype.buildUrl.call(this,"/"+u.config.rootName+"/"+this.namespace+n,t,a)},n}(s.BaseRequest);n.Request=l,n.registerOnFramework=function(e,n){window.BespokeServer?window.BespokeServer.registerOnBespoke(n):c.registerOnElf(e,o({localeNames:[e]},n))}},function(e,n,t){"use strict";function a(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}Object.defineProperty(n,"__esModule",{value:!0});var r=t(1);n.baseEnum=r,a(t(11)),a(t(1)),a(t(14)),a(t(3))},function(e,n,t){"use strict";function a(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}Object.defineProperty(n,"__esModule",{value:!0}),a(t(12)),a(t(13))},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.csrfCookieKey="_csrf"},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),function(e){e[e.student=0]="student",e[e.teacher=1]="teacher"}(n.AcademusRole||(n.AcademusRole={})),function(e){e[e.invalidInput=0]="invalidInput",e[e.success=1]="success",e[e.notFound=2]="notFound",e[e.serverError=3]="serverError"}(n.ResponseCode||(n.ResponseCode={})),function(e){e.owner="o",e.player="p",e.clientRobot="cr",e.serverRobot="sr"}(n.Actor||(n.Actor={})),function(e){e[e.China=86]="China",e[e.American=1]="American",e[e.Hongkong=852]="Hongkong",e[e.Singapore=65]="Singapore",e[e.UK=44]="UK",e[e.Andorra=376]="Andorra",e[e["United Arab Emirates"]=971]="United Arab Emirates",e[e.Afghanistan=93]="Afghanistan",e[e["Antigua and Barbuda"]=1268]="Antigua and Barbuda",e[e.Anguilla=1264]="Anguilla",e[e.Albania=355]="Albania",e[e.Armenia=374]="Armenia",e[e.Angola=244]="Angola",e[e.Argentina=54]="Argentina",e[e["American Samoa"]=1684]="American Samoa",e[e.Austria=43]="Austria",e[e.Australia=61]="Australia",e[e.Aruba=297]="Aruba",e[e.Azerbaijan=994]="Azerbaijan",e[e["Bosniaand Herzegovina"]=387]="Bosniaand Herzegovina",e[e.Barbados=1246]="Barbados",e[e.Bangladesh=880]="Bangladesh",e[e.Belgium=32]="Belgium",e[e["Burkina Faso"]=226]="Burkina Faso",e[e.Bulgaria=359]="Bulgaria",e[e.Bahrain=973]="Bahrain",e[e.Burundi=257]="Burundi",e[e.Benin=229]="Benin",e[e.Bermuda=1441]="Bermuda",e[e.Brunei=673]="Brunei",e[e.Bolivia=591]="Bolivia",e[e["Caribisch Nederland"]=599]="Caribisch Nederland",e[e.Brazil=55]="Brazil",e[e.Bahamas=1242]="Bahamas",e[e.Bhutan=975]="Bhutan",e[e.Botswana=267]="Botswana",e[e.Belarus=375]="Belarus",e[e.Belize=501]="Belize",e[e.Canada=1]="Canada",e[e["Democratic Republic of theCongo"]=243]="Democratic Republic of theCongo",e[e["Central African Republic"]=236]="Central African Republic",e[e["Republic Of The Congo"]=242]="Republic Of The Congo",e[e.Switzerland=41]="Switzerland",e[e["Ivory Coast"]=225]="Ivory Coast",e[e["Cook Islands"]=682]="Cook Islands",e[e.Chile=56]="Chile",e[e.Cameroon=237]="Cameroon",e[e.Colombia=57]="Colombia",e[e.CostaRica=506]="CostaRica",e[e.Cuba=53]="Cuba",e[e["Cape Verde"]=238]="Cape Verde",e[e.Curacao=599]="Curacao",e[e.Cyprus=357]="Cyprus",e[e.Czech=420]="Czech",e[e.Germany=49]="Germany",e[e.Djibouti=253]="Djibouti",e[e.Denmark=45]="Denmark",e[e.Dominica=1767]="Dominica",e[e["dominican republic"]=1809]="dominican republic",e[e.Algeria=213]="Algeria",e[e.Ecuador=593]="Ecuador",e[e.Estonia=372]="Estonia",e[e.Egypt=20]="Egypt",e[e.Eritrea=291]="Eritrea",e[e.Spain=34]="Spain",e[e.Ethiopia=251]="Ethiopia",e[e.Finland=358]="Finland",e[e.Fiji=679]="Fiji",e[e.Micronesia=691]="Micronesia",e[e["Faroe Islands"]=298]="Faroe Islands",e[e.France=33]="France",e[e.Gabon=241]="Gabon",e[e["United Kingdom"]=44]="United Kingdom",e[e.Grenada=1473]="Grenada",e[e.Georgia=995]="Georgia",e[e["French Guiana"]=594]="French Guiana",e[e.Ghana=233]="Ghana",e[e.Gibraltar=350]="Gibraltar",e[e.Greenland=299]="Greenland",e[e.Gambia=220]="Gambia",e[e.Guinea=224]="Guinea",e[e.Guadeloupe=590]="Guadeloupe",e[e["Equatorial Guinea"]=240]="Equatorial Guinea",e[e.Greece=30]="Greece",e[e.Guatemala=502]="Guatemala",e[e.Guam=1671]="Guam",e[e["Guinea-Bissau"]=245]="Guinea-Bissau",e[e.Guyana=592]="Guyana",e[e["Hong Kong"]=852]="Hong Kong",e[e.Honduras=504]="Honduras",e[e.Croatia=385]="Croatia",e[e.Haiti=509]="Haiti",e[e.Hungary=36]="Hungary",e[e.Indonesia=62]="Indonesia",e[e.Ireland=353]="Ireland",e[e.Israel=972]="Israel",e[e.India=91]="India",e[e.Iraq=964]="Iraq",e[e.Iran=98]="Iran",e[e.Iceland=354]="Iceland",e[e.Italy=39]="Italy",e[e.Jamaica=1876]="Jamaica",e[e.Jordan=962]="Jordan",e[e.Japan=81]="Japan",e[e.Kenya=254]="Kenya",e[e.Kyrgyzstan=996]="Kyrgyzstan",e[e.Cambodia=855]="Cambodia",e[e.Kiribati=686]="Kiribati",e[e.Comoros=269]="Comoros",e[e["Saint Kitts and Nevis"]=1869]="Saint Kitts and Nevis",e[e["Korea Democratic Rep."]=850]="Korea Democratic Rep.",e[e["South Korea"]=82]="South Korea",e[e.Kuwait=965]="Kuwait",e[e["Cayman Islands"]=1345]="Cayman Islands",e[e.Kazakhstan=7]="Kazakhstan",e[e.Laos=856]="Laos",e[e.Lebanon=961]="Lebanon",e[e["Saint Lucia"]=1758]="Saint Lucia",e[e.Liechtenstein=423]="Liechtenstein",e[e["Sri Lanka"]=94]="Sri Lanka",e[e.Liberia=231]="Liberia",e[e.Lesotho=266]="Lesotho",e[e.Lithuania=370]="Lithuania",e[e.Luxembourg=352]="Luxembourg",e[e.Latvia=371]="Latvia",e[e.Libya=218]="Libya",e[e.Morocco=212]="Morocco",e[e.Monaco=377]="Monaco",e[e.Moldova=373]="Moldova",e[e.Montenegro=382]="Montenegro",e[e.Madagascar=261]="Madagascar",e[e["Marshall Islands"]=692]="Marshall Islands",e[e.Macedonia=389]="Macedonia",e[e.Mali=223]="Mali",e[e.Myanmar=95]="Myanmar",e[e.Mongolia=976]="Mongolia",e[e.Macau=853]="Macau",e[e.Mauritania=222]="Mauritania",e[e.Montserrat=1664]="Montserrat",e[e.Malta=356]="Malta",e[e.Mauritius=230]="Mauritius",e[e.Maldives=960]="Maldives",e[e.Malawi=265]="Malawi",e[e.Mexico=52]="Mexico",e[e.Malaysia=60]="Malaysia",e[e.Mozambique=258]="Mozambique",e[e.Namibia=264]="Namibia",e[e["New Caledonia"]=687]="New Caledonia",e[e.Niger=227]="Niger",e[e.Nigeria=234]="Nigeria",e[e.Nicaragua=505]="Nicaragua",e[e.Netherlands=31]="Netherlands",e[e.Norway=47]="Norway",e[e.Nepal=977]="Nepal",e[e.Nauru=674]="Nauru",e[e["New Zealand"]=64]="New Zealand",e[e.Oman=968]="Oman",e[e.Panama=507]="Panama",e[e.Peru=51]="Peru",e[e["French Polynesia"]=689]="French Polynesia",e[e["Papua New Guinea"]=675]="Papua New Guinea",e[e.Philippines=63]="Philippines",e[e.Pakistan=92]="Pakistan",e[e.Poland=48]="Poland",e[e["Saint Pierreand Miquelon"]=508]="Saint Pierreand Miquelon",e[e["Puerto Rico"]=1787]="Puerto Rico",e[e.Portugal=351]="Portugal",e[e.Palau=680]="Palau",e[e.Paraguay=595]="Paraguay",e[e.Qatar=974]="Qatar",e[e["Réunion Island"]=262]="Réunion Island",e[e.Romania=40]="Romania",e[e.Serbia=381]="Serbia",e[e.Russia=7]="Russia",e[e.Rwanda=250]="Rwanda",e[e["Saudi Arabia"]=966]="Saudi Arabia",e[e["Solomon Islands"]=677]="Solomon Islands",e[e.Seychelles=248]="Seychelles",e[e.Sudan=249]="Sudan",e[e.Sweden=46]="Sweden",e[e.Slovenia=386]="Slovenia",e[e.Slovakia=421]="Slovakia",e[e["Sierra Leone"]=232]="Sierra Leone",e[e["San Marino"]=378]="San Marino",e[e.Senegal=221]="Senegal",e[e.Somalia=252]="Somalia",e[e.Suriname=597]="Suriname",e[e["Sao Tome and Principe"]=239]="Sao Tome and Principe",e[e.ElSalvador=503]="ElSalvador",e[e.Syria=963]="Syria",e[e.Swaziland=268]="Swaziland",e[e["Turksand Caicos Islands"]=1649]="Turksand Caicos Islands",e[e.Chad=235]="Chad",e[e.Togo=228]="Togo",e[e.Thailand=66]="Thailand",e[e.Tajikistan=992]="Tajikistan",e[e["East Timor"]=670]="East Timor",e[e.Turkmenistan=993]="Turkmenistan",e[e.Tunisia=216]="Tunisia",e[e.Tonga=676]="Tonga",e[e.Turkey=90]="Turkey",e[e["Trinidadand Tobago"]=1868]="Trinidadand Tobago",e[e.Taiwan=886]="Taiwan",e[e.Tanzania=255]="Tanzania",e[e.Ukraine=380]="Ukraine",e[e.Uganda=256]="Uganda",e[e["United States"]=1]="United States",e[e.Uruguay=598]="Uruguay",e[e.Uzbekistan=998]="Uzbekistan",e[e["Saint Vincent and The Grenadines"]=1784]="Saint Vincent and The Grenadines",e[e.Venezuela=58]="Venezuela",e[e["VirginIslands,British"]=1284]="VirginIslands,British",e[e.Vietnam=84]="Vietnam",e[e.Vanuatu=678]="Vanuatu",e[e.Samoa=685]="Samoa",e[e.Yemen=967]="Yemen",e[e.Mayotte=269]="Mayotte",e[e["South Africa"]=27]="South Africa",e[e.Zambia=260]="Zambia",e[e.Zimbabwe=263]="Zimbabwe"}(n.NationCode||(n.NationCode={}))},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=t(3),r=t(1),o=t(15),i=function(){function e(e){var n=this;this.emitter=e,this.listeners=new Map,this._emit=o(function(e,t,a){return n.emitter.emit(r.SocketEvent.move,e,t,a)},a.config.minMoveInterval,{trailing:!1}),this.emitter.on(r.SocketEvent.push,function(e,t){return n.trigger(e,t)})}return e.prototype.getListeners=function(e){return this.listeners.get(e)||[]},e.prototype.on=function(e,n){this.listeners.set(e,this.getListeners(e).concat([n]))},e.prototype.trigger=function(e,n){this.getListeners(e).forEach(function(e){return e(n)})},e.prototype.emit=function(e,n,t){this._emit(e,n,t)},e}();n.FrameEmitter=i},function(e,n,t){var a=t(16),r=t(2),o="Expected a function";e.exports=function(e,n,t){var i=!0,u=!0;if("function"!=typeof e)throw new TypeError(o);return r(t)&&(i="leading"in t?!!t.leading:i,u="trailing"in t?!!t.trailing:u),a(e,n,{leading:i,maxWait:n,trailing:u})}},function(e,n,t){var a=t(2),r=t(17),o=t(20),i="Expected a function",u=Math.max,c=Math.min;e.exports=function(e,n,t){var s,l,d,f,p,m,y=0,g=!1,b=!1,h=!0;if("function"!=typeof e)throw new TypeError(i);function v(n){var t=s,a=l;return s=l=void 0,y=n,f=e.apply(a,t)}function S(e){var t=e-m;return void 0===m||t>=n||t<0||b&&e-y>=d}function C(){var e=r();if(S(e))return M(e);p=setTimeout(C,function(e){var t=n-(e-m);return b?c(t,d-(e-y)):t}(e))}function M(e){return p=void 0,h&&s?v(e):(s=l=void 0,f)}function w(){var e=r(),t=S(e);if(s=arguments,l=this,m=e,t){if(void 0===p)return function(e){return y=e,p=setTimeout(C,n),g?v(e):f}(m);if(b)return p=setTimeout(C,n),v(m)}return void 0===p&&(p=setTimeout(C,n)),f}return n=o(n)||0,a(t)&&(g=!!t.leading,d=(b="maxWait"in t)?u(o(t.maxWait)||0,n):d,h="trailing"in t?!!t.trailing:h),w.cancel=function(){void 0!==p&&clearTimeout(p),y=0,s=m=l=p=void 0},w.flush=function(){return void 0===p?f:M(r())},w}},function(e,n,t){var a=t(4);e.exports=function(){return a.Date.now()}},function(e,n,t){(function(n){var t="object"==typeof n&&n&&n.Object===Object&&n;e.exports=t}).call(this,t(19))},function(e,n){var t;t=function(){return this}();try{t=t||new Function("return this")()}catch(e){"object"==typeof window&&(t=window)}e.exports=t},function(e,n,t){var a=t(2),r=t(21),o=NaN,i=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,s=/^0o[0-7]+$/i,l=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(r(e))return o;if(a(e)){var n="function"==typeof e.valueOf?e.valueOf():e;e=a(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var t=c.test(e);return t||s.test(e)?l(e.slice(2),t?2:8):u.test(e)?o:+e}},function(e,n,t){var a=t(22),r=t(25),o="[object Symbol]";e.exports=function(e){return"symbol"==typeof e||r(e)&&a(e)==o}},function(e,n,t){var a=t(5),r=t(23),o=t(24),i="[object Null]",u="[object Undefined]",c=a?a.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?u:i:c&&c in Object(e)?r(e):o(e)}},function(e,n,t){var a=t(5),r=Object.prototype,o=r.hasOwnProperty,i=r.toString,u=a?a.toStringTag:void 0;e.exports=function(e){var n=o.call(e,u),t=e[u];try{e[u]=void 0;var a=!0}catch(e){}var r=i.call(e);return a&&(n?e[u]=t:delete e[u]),r}},function(e,n){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},function(e,n){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,n,t){"use strict";var a,r=this&&this.__extends||(a=function(e,n){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])})(e,n)},function(e,n){function t(){this.constructor=e}a(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)});Object.defineProperty(n,"__esModule",{value:!0});var o=t(0);!function(e){var n=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r(n,e),n}(o.Component);e.Create=n}(n.Template||(n.Template={})),n.registerOnElf=function(e,n){window.ElfLinker&&window.ElfLinker.registerOnElf(e,n)}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=t(0),r=t(6),o=t(28),i=t(7);n.Play=function(e){var n=e.game,t=e.playerState;return a.createElement("iframe",{style:{width:"100vw",height:"100vh",display:"block"},frameBorder:0,src:"/"+r.config.rootName+"/"+i.namespace+"/egret?"+o.stringify({gameId:n.id,token:t.actor.token})})}},function(e,n,t){"use strict";const a=t(29),r=t(30),o=t(31);function i(e,n){return n.encode?n.strict?a(e):encodeURIComponent(e):e}function u(e,n){return n.decode?r(e):e}function c(e){const n=e.indexOf("#");return-1!==n&&(e=e.slice(0,n)),e}function s(e){const n=(e=c(e)).indexOf("?");return-1===n?"":e.slice(n+1)}function l(e,n){const t=function(e){let n;switch(e.arrayFormat){case"index":return(e,t,a)=>{n=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),n?(void 0===a[e]&&(a[e]={}),a[e][n[1]]=t):a[e]=t};case"bracket":return(e,t,a)=>{n=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),n?void 0!==a[e]?a[e]=[].concat(a[e],t):a[e]=[t]:a[e]=t};case"comma":return(e,n,t)=>{const a="string"==typeof n&&n.split("").indexOf(",")>-1?n.split(","):n;t[e]=a};default:return(e,n,t)=>{void 0!==t[e]?t[e]=[].concat(t[e],n):t[e]=n}}}(n=Object.assign({decode:!0,sort:!0,arrayFormat:"none",parseNumbers:!1,parseBooleans:!1},n)),a=Object.create(null);if("string"!=typeof e)return a;if(!(e=e.trim().replace(/^[?#&]/,"")))return a;for(const r of e.split("&")){let[e,i]=o(r.replace(/\+/g," "),"=");i=void 0===i?null:u(i,n),n.parseNumbers&&!Number.isNaN(Number(i))&&(i=Number(i)),!n.parseBooleans||null===i||"true"!==i.toLowerCase()&&"false"!==i.toLowerCase()||(i="true"===i.toLowerCase()),t(u(e,n),i,a)}return!1===n.sort?a:(!0===n.sort?Object.keys(a).sort():Object.keys(a).sort(n.sort)).reduce((e,n)=>{const t=a[n];return Boolean(t)&&"object"==typeof t&&!Array.isArray(t)?e[n]=function e(n){return Array.isArray(n)?n.sort():"object"==typeof n?e(Object.keys(n)).sort((e,n)=>Number(e)-Number(n)).map(e=>n[e]):n}(t):e[n]=t,e},Object.create(null))}n.extract=s,n.parse=l,n.stringify=(e,n)=>{if(!e)return"";const t=function(e){switch(e.arrayFormat){case"index":return n=>(t,a)=>{const r=t.length;return void 0===a?t:null===a?[...t,[i(n,e),"[",r,"]"].join("")]:[...t,[i(n,e),"[",i(r,e),"]=",i(a,e)].join("")]};case"bracket":return n=>(t,a)=>void 0===a?t:null===a?[...t,[i(n,e),"[]"].join("")]:[...t,[i(n,e),"[]=",i(a,e)].join("")];case"comma":return n=>(t,a,r)=>null==a||0===a.length?t:0===r?[[i(n,e),"=",i(a,e)].join("")]:[[t,i(a,e)].join(",")];default:return n=>(t,a)=>void 0===a?t:null===a?[...t,i(n,e)]:[...t,[i(n,e),"=",i(a,e)].join("")]}}(n=Object.assign({encode:!0,strict:!0,arrayFormat:"none"},n)),a=Object.keys(e);return!1!==n.sort&&a.sort(n.sort),a.map(a=>{const r=e[a];return void 0===r?"":null===r?i(a,n):Array.isArray(r)?r.reduce(t(a),[]).join("&"):i(a,n)+"="+i(r,n)}).filter(e=>e.length>0).join("&")},n.parseUrl=(e,n)=>({url:c(e).split("?")[0]||"",query:l(s(e),n)})},function(e,n,t){"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`)},function(e,n,t){"use strict";var a=new RegExp("%[a-f0-9]{2}","gi"),r=new RegExp("(%[a-f0-9]{2})+","gi");function o(e,n){try{return decodeURIComponent(e.join(""))}catch(e){}if(1===e.length)return e;n=n||1;var t=e.slice(0,n),a=e.slice(n);return Array.prototype.concat.call([],o(t),o(a))}function i(e){try{return decodeURIComponent(e)}catch(r){for(var n=e.match(a),t=1;t<n.length;t++)n=(e=o(n,t).join("")).match(a);return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(n){return function(e){for(var n={"%FE%FF":"��","%FF%FE":"��"},t=r.exec(e);t;){try{n[t[0]]=decodeURIComponent(t[0])}catch(e){var a=i(t[0]);a!==t[0]&&(n[t[0]]=a)}t=r.exec(e)}n["%C2"]="�";for(var o=Object.keys(n),u=0;u<o.length;u++){var c=o[u];e=e.replace(new RegExp(c,"g"),n[c])}return e}(e)}}},function(e,n,t){"use strict";e.exports=(e,n)=>{if("string"!=typeof e||"string"!=typeof n)throw new TypeError("Expected the arguments to be of type `string`");if(""===n)return[e];const t=e.indexOf(n);return-1===t?[e]:[e.slice(0,t),e.slice(t+n.length)]}}]);